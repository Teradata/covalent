@if (!showEmptyState) {
  <ng-container>
    <mat-progress-bar
      *ngIf="loading"
      mode="indeterminate"
      color="accent"
    ></mat-progress-bar>
    <ng-container *ngIf="showHeader">
      <td-breadcrumbs>
        <a
          td-breadcrumb
          [matTooltip]="goHomeLabel ?? ''"
          (click)="reset()"
          [attr.data-test]="'home-button'"
          >Homeeee</a
        >
        <ng-container
          *ngFor="let stack of historyStack; last as isLast; index as index"
        >
          <ng-container *ngIf="!isLast; else lastBreadCrumb">
            <a
              td-breadcrumb
              (click)="goBack(historyStack.length - index)"
              [attr.data-test]="'back-button'"
              >{{ stack.title }}</a
            >
          </ng-container>
          <ng-template #lastBreadCrumb>
            <mat-icon class="breadcrumb-end-icon">chevron_right</mat-icon>
          </ng-template>
        </ng-container>
      </td-breadcrumbs>
      <div class="breadcrumb-current-title" [attr.data-test]="'title'">
        {{ currentItemTitle }}
      </div>

      <mat-divider [style.position]="'relative'"></mat-divider>
    </ng-container>

    <div class="scroll-area" id="td-markdown-navigator-content">
      @if (showTdMarkdownLoader || showTdMarkdown) {
        <div class="markdown-wrapper" #markdownWrapper>
          @if (markdownLoaderError) {
            <td-message
              [sublabel]="markdownLoaderError"
              color="warn"
              icon="error"
              [attr.data-test]="'markdown-loader-error'"
            ></td-message>
          }

          @if (showTdMarkdownLoader) {
            <td-flavored-markdown-loader
              [url]="url ?? ''"
              [httpOptions]="httpOptions ?? {}"
              [anchor]="anchor ?? ''"
              [copyCodeToClipboard]="copyCodeToClipboard"
              [copyCodeTooltips]="copyCodeTooltips"
              (loadFailed)="handleMarkdownLoaderError($event)"
              (buttonClicked)="buttonClicked.emit($event)"
            ></td-flavored-markdown-loader>
          }

          @if (showTdMarkdown) {
            <td-flavored-markdown
              [content]="markdownString ?? ''"
              [hostedUrl]="url ?? ''"
              [anchor]="anchor ?? ''"
              [copyCodeToClipboard]="copyCodeToClipboard"
              [copyCodeTooltips]="copyCodeTooltips"
              (buttonClicked)="buttonClicked.emit($event)"
            ></td-flavored-markdown>
          }
        </div>
      }

      @if (childrenUrlError) {
        <td-message
          [sublabel]="childrenUrlError"
          color="warn"
          icon="error"
          [attr.data-test]="'children-url-error'"
        ></td-message>
      }

      @if (showMenu) {
        <div class="td-markdown-list">
          <mat-action-list>
            @for (item of currentMenuItems; let index = $index; track item.id) {
              <button
                [id]="
                  'td-markdown-navigator-list-item-' +
                  (item.id ? item.id : index)
                "
                (click)="handleItemSelected(item)"
                mat-list-item
                [matTooltip]="getTitle(item)"
                matTooltipPosition="before"
                matTooltipShowDelay="500"
              >
                <mat-icon matListItemIcon>
                  {{ getIcon(item) }}
                </mat-icon>
                <span matListItemTitle class="truncate">
                  {{ getTitle(item) }}
                </span>
                <span matListItemLine class="truncate">
                  {{ item.description }}
                </span>
                <mat-divider></mat-divider>
              </button>
            }
          </mat-action-list>
        </div>
      }
      <ng-container *ngComponentOutlet="footerComponent"></ng-container>
    </div>
  </ng-container>
}

@if (showEmptyState) {
  <div layout="column" layout-align="center center" class="empty-state">
    <mat-icon matListItemAvatar>subject</mat-icon>
    <h2>{{ emptyStateLabel }}</h2>
  </div>
}
